(this["webpackJsonpops-deckgl-carto"]=this["webpackJsonpops-deckgl-carto"]||[]).push([[0],{175:function(e,t){},351:function(e,t){},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(47),s=n.n(i),a=n(75),o=n(46),r=n(173),l=n.n(r),d=n(213),b=n(98),u=function(e){var t=Object(c.useState)("idle"),n=Object(b.a)(t,2),i=n[0],s=n[1],a=Object(c.useState)([]),o=Object(b.a)(a,2),r=o[0],u=o[1];return Object(c.useEffect)((function(){e&&function(){var t=Object(d.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s("fetching"),t.next=3,fetch("https://gsc-admin.carto.com/api/v2/sql?q=".concat(encodeURIComponent(e)));case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,u(c.rows.sort((function(e,t){return e.district>t.district?1:-1}))),s("fetched");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),{status:i,data:r}},h=n(124),j=n(113),p=n(397),g=n(393),O=n(225),f=n(398),m=n(16),x={latitude:-33.842104,longitude:150.998914,zoom:10};Object(j.c)({username:"gsc-admin",apiKey:"fFbU97TNhKdhIO4yYyFjdA"});var v={COLOR_YES:[0,0,0,0],COLOR_NO:[248,15,54],COLOR_GREEN:[16,196,118]},y=function(e){var t=e.distance,n="\n  \n    select m.cartodb_id,m.mb_code16,m.the_geom_webmercator, a.dwelling, a.density,\n    case \n    when a.distance <".concat(t," then 'Yes'\n    else 'No'\n    end has_access\n    from \"gsc-admin\".meshblocks_mua m join \"gsc-admin\".ops_access a on a.mb_code16= m.mb_code16 where a.dwelling>0 and a.density>0\n  \n    "),c=new p.a({id:"meshblock",data:n,getFillColor:function(e){return"Yes"===e.properties.has_access?v.COLOR_YES:v.COLOR_NO},getLineColor:[0,0,0,0],lineWidthMinPixels:0,pickable:!0}),i=new p.a({id:"district",data:'select the_geom_webmercator, district from "gsc-admin".districtboundary ',getFillColor:[0,0,0,0],getLineColor:[99,99,99,255],lineWidthMinPixels:1.2,pickable:!1}),s=new p.a({id:"openspace",data:'select the_geom_webmercator from "gsc-admin".openspace_bis ',getFillColor:v.COLOR_GREEN,getLineColor:[0,0,0,0],lineWidthMinPixels:0,pickable:!1});return Object(m.jsx)("div",{children:Object(m.jsx)(f.a,{width:"100%",height:"100%",initialViewState:x,getTooltip:function(e){var t=e.object;if(!t)return!1;var n=t.properties,c=n.dwelling,i=n.density;return{html:"<div>dwelling(n): ".concat(c,"</div><div>density: ").concat(i,"/ha</div>"),style:{fontSize:"0.8em"}}},controller:!0,layers:[c,s,c,i],children:Object(m.jsx)(O.a,{reuseMaps:!0,mapStyle:g.a.POSITRON,mapboxApiAccessToken:"pk.eyJ1IjoiYnNuYXlhbiIsImEiOiJja3Ewczd3MW4wN3Z3MnVvNDNsenlzNnFsIn0.f8nk8yrxIeCKOlzIy1b-Pg",preventStyleDiffing:!0})})})},w=function(e){var t=e.distance,n=function(e){return'\n    select a.district,(a.total*100/gt.grand_total) as percentage\n    from \n    (select district, sum(dwelling) total  from "gsc-admin".ops_access  where distance <= '.concat(e,'  group by district) a join\n    (select district,sum(dwelling) grand_total from "gsc-admin".ops_access  group by district) gt  on a.district = gt.district\n   ')}(t),c=u(n),i=(c.status,c.data),s={labels:i.map((function(e){return e.district})),datasets:[{label:"%",data:i.map((function(e){return 100-e.percentage})),backgroundColor:"rgba(".concat([].concat(Object(o.a)(v.COLOR_NO),[1]).join(),")"),borderColor:"rgb(".concat(v.COLOR_NO.join(),")"),borderWidth:0}]},a={indexAxis:"y",maintainAspectRatio:!1,elements:{bar:{borderWidth:1}},responsive:!0,plugins:{legend:{position:"right",display:!1},title:{display:!1,text:"".concat(t," metres access to open space")}}};return Object(m.jsx)("div",{style:{height:"300px"},children:Object(m.jsx)(h.a,{data:s,options:a})})},_=(n(355),n(394)),C=n(89),k=n(402),N=n(396),R=(n(400),Object(_.a)((function(e){return{root:{width:280+2*e.spacing(3)},margin:{height:e.spacing(3)}}})));var S=Object(C.a)({root:{color:"#52af77",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(k.a);function L(){var e=R(),t=Object(a.c)((function(e){return e.distance})),n=Object(a.b)();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)(N.a,{gutterBottom:!0,children:"Select distance"}),Object(m.jsx)(S,{valueLabelDisplay:"auto","aria-label":"distance slider",defaultValue:t,min:200,max:1e3,step:200,onChange:function(e,t){return function(e,t){return n({type:"new value",distance:t})}(0,t)}})]})}var E=function(){var e=Object(a.c)((function(e){return e.distance}));Object(a.b)();return Object(m.jsxs)("div",{className:"layer-selector",style:{fontFamily:"Roboto, sans-serif"},children:[Object(m.jsx)(L,{}),Object(m.jsxs)("b",{children:["% of dwellings that do not have access to public open space within ",e," metres"]}),Object(m.jsx)(w,{distance:e}),Object(m.jsx)("div",{children:Object(m.jsx)("span",{style:{fontSize:"8px"},children:"Source: GSC Analysis 2021, DPIE, ABS 2016"})})]})},I=(n(356),function(){return Object(m.jsx)("div",{className:"info",style:{fontFamily:"Roboto, sans-serif"},children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Public open space accessibility"}),Object(m.jsx)("p",{style:{fontSize:"12px",color:"gray",lineHeight:"1.5em"},children:"This access to public open space analysis utilises a walking distance along the road networks from the centroid of a mesh block to its nearest access point of the open spaces. If the centroid of the mesh block is within the desired distance of open space, the whole mesh block dwelling is considered to have access to open space."}),Object(m.jsxs)("span",{style:{fontSize:"10px",color:"gray",lineHeight:"1.5em"},children:["Please contact ",Object(m.jsx)("a",{href:"mailto: data@gsc.nsw.gov.au",children:"data@gsc.nsw.gov.au"})," for more info"]})]})})}),F=(n(357),function(e){e.distance;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{id:"legend",style:{fontFamily:"Roboto, sans-serif"},children:Object(m.jsxs)("div",{className:"legend-content",children:[Object(m.jsxs)("li",{children:[" ",Object(m.jsx)("div",{className:"circle",style:{backgroundColor:"rgba(".concat(v.COLOR_NO.join(),")")}}),"Meshblock without access"]}),Object(m.jsxs)("li",{children:[" ",Object(m.jsx)("div",{className:"circle",style:{backgroundColor:"rgba(".concat(v.COLOR_GREEN.join(),")")}}),"Public open space"]})]})})})});var P=function(){var e=Object(a.c)((function(e){return e.distance}));return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(y,{distance:e}),Object(m.jsx)(I,{}),Object(m.jsx)(E,{}),Object(m.jsx)(F,{distance:e})]})},z=(n(358),n(229)),A={distance:400};var M=Object(z.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;return"new value"===t.type?{distance:t.distance}:e}));s.a.render(Object(m.jsx)(a.a,{store:M,children:Object(m.jsx)(P,{})}),document.getElementById("root"))}},[[359,1,2]]]);
//# sourceMappingURL=main.7f6d7c8d.chunk.js.map